name: Build

on: 
  push:
    branches:
      - '*'
  workflow_dispatch:
      
jobs:
  video-streaming:
    uses: ./.github/workflows/build-template.yaml
    with:
      DIRECTORY: video-streaming 
  metadata:
    uses: ./.github/workflows/build-template.yaml
    with:
      DIRECTORY: metadata 
  history:
    uses: ./.github/workflows/build-template.yaml
    with:
      DIRECTORY: history    
  azure-storage:
    uses: ./.github/workflows/build-template.yaml
    with:
      DIRECTORY: azure-storage
  gateway:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v3    
      - name: gateway build and test
        run: |    
          cd gateway
          npm install
